<!--pages/auth/register.wxml-->
<view class="container">
  <!-- 背景装饰 -->
  <view class="bg-decoration">
    <image class="bg-image" src="/images/birdies.jpg" mode="aspectFill" />
    <view class="bg-overlay"></view>
  </view>

  <!-- 注册表单 -->
  <view class="register-form card">
    <view class="form-header">
      <text class="form-title text-title">创建账户</text>
      <text class="form-subtitle text-caption">{{roleText}}注册</text>
    </view>

    <view class="input-group">
      <label class="input-label input-required">邮箱地址</label>
      <input 
        class="input-field" 
        placeholder="请输入邮箱地址" 
        value="{{formData.email}}"
        bindinput="onEmailInput"
        type="text"
      />
    </view>

    <view class="input-group">
      <label class="input-label input-required">密码</label>
      <input 
        class="input-field" 
        placeholder="请输入密码（至少6位）" 
        value="{{formData.password}}"
        bindinput="onPasswordInput"
        password="{{!showPassword}}"
      />
      <view class="password-toggle" bindtap="togglePassword">
        <text class="toggle-icon">{{showPassword ? '👁️' : '👁️‍🗨️'}}</text>
      </view>
    </view>

    <view class="input-group">
      <label class="input-label input-required">确认密码</label>
      <input 
        class="input-field" 
        placeholder="请再次输入密码" 
        value="{{formData.confirmPassword}}"
        bindinput="onConfirmPasswordInput"
        password="{{!showConfirmPassword}}"
      />
      <view class="password-toggle" bindtap="toggleConfirmPassword">
        <text class="toggle-icon">{{showConfirmPassword ? '👁️' : '👁️‍🗨️'}}</text>
      </view>
    </view>

    <view class="input-group">
      <label class="input-label input-required">姓名/昵称</label>
      <input 
        class="input-field" 
        placeholder="请输入您的姓名或昵称" 
        value="{{formData.displayName}}"
        bindinput="onDisplayNameInput"
        maxlength="20"
      />
    </view>

    <view class="input-group">
      <label class="input-label">手机号码</label>
      <input 
        class="input-field" 
        placeholder="请输入手机号码（选填）" 
        value="{{formData.phone}}"
        bindinput="onPhoneInput"
        type="number"
        maxlength="11"
      />
    </view>

    <view class="input-group">
      <label class="input-label">微信号</label>
      <input 
        class="input-field" 
        placeholder="请输入微信号（选填）" 
        value="{{formData.wechat}}"
        bindinput="onWechatInput"
        maxlength="50"
      />
    </view>

    <!-- 管理员注册额外字段 -->
    <view wx:if="{{userRole === 'admin'}}" class="admin-fields">
      <view class="admin-notice">
        <text class="notice-icon">⚠️</text>
        <text class="notice-text text-caption">管理员账户具有发布活动、管理用户等高级权限，请谨慎注册。</text>
      </view>
    </view>

    <button 
      class="btn btn-primary register-btn" 
      bindtap="onRegister"
      disabled="{{!canRegister || loading}}"
      loading="{{loading}}"
    >
      {{loading ? '注册中...' : '立即注册'}}
    </button>

    <view class="form-footer">
      <text class="footer-text text-caption">已有账户？</text>
      <text class="link-text text-caption" bindtap="goToLogin">立即登录</text>
    </view>
  </view>
</view>
