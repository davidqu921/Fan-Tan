<!--pages/profile/index.wxml-->
<view class="container">
  <!-- èƒŒæ™¯è£…é¥° -->
  <view class="bg-decoration">
    <image class="bg-image" src="/images/syq.jpg" mode="aspectFill" />
    <view class="bg-overlay"></view>
  </view>

  <!-- ç”¨æˆ·ä¿¡æ¯åŒºåŸŸ -->
  <view class="user-info-section card">
    <view class="user-avatar">
      <image class="avatar-large" src="{{userInfo.avatarUrl || '/images/default-avatar.png'}}" />
    </view>
    <view class="user-details">
      <text class="user-name text-title">{{userInfo.nickName || 'æœªç™»å½•'}}</text>
      <text class="user-desc text-caption">ç¾½æ¯›çƒçˆ±å¥½è€…</text>
    </view>
    <button wx:if="{{!userInfo}}" class="btn btn-primary login-btn" bindtap="onLogin">
      ç™»å½•
    </button>
  </view>

  <!-- ç»Ÿè®¡ä¿¡æ¯ -->
  <view class="stats-section card" wx:if="{{userInfo}}">
    <view class="stats-item">
      <text class="stats-number">{{userStats.joinedCount}}</text>
      <text class="stats-label">å‚ä¸æ´»åŠ¨</text>
    </view>
    <view class="stats-item">
      <text class="stats-number">{{userStats.createdCount}}</text>
      <text class="stats-label">å‘å¸ƒæ´»åŠ¨</text>
    </view>
    <view class="stats-item">
      <text class="stats-number">{{userStats.commentCount}}</text>
      <text class="stats-label">å‘è¡¨è¯„è®º</text>
    </view>
  </view>

  <!-- åŠŸèƒ½èœå• -->
  <view class="menu-section">
    <!-- æˆ‘çš„æ´»åŠ¨ -->
    <view class="menu-group card">
      <view class="menu-item" bindtap="onMyActivities">
        <view class="menu-icon">ğŸ¸</view>
        <text class="menu-text text-body">æˆ‘å‚ä¸çš„æ´»åŠ¨</text>
        <text class="menu-arrow">></text>
      </view>
      <view class="menu-item" bindtap="onMyCreated" wx:if="{{isAdmin}}">
        <view class="menu-icon">ğŸ“</view>
        <text class="menu-text text-body">æˆ‘å‘å¸ƒçš„æ´»åŠ¨</text>
        <text class="menu-arrow">></text>
      </view>
    </view>

    <!-- ç®¡ç†åŠŸèƒ½ï¼ˆç®¡ç†å‘˜å¯è§ï¼‰ -->
    <view class="menu-group card" wx:if="{{isAdmin}}">
      <view class="menu-item" bindtap="onManageActivities">
        <view class="menu-icon">âš™ï¸</view>
        <text class="menu-text text-body">æ´»åŠ¨ç®¡ç†</text>
        <text class="menu-arrow">></text>
      </view>
      <view class="menu-item" bindtap="onExportData">
        <view class="menu-icon">ğŸ“Š</view>
        <text class="menu-text text-body">æ•°æ®å¯¼å‡º</text>
        <text class="menu-arrow">></text>
      </view>
    </view>

    <!-- è®¾ç½®åŠŸèƒ½ -->
    <view class="menu-group card">
      <view class="menu-item" bindtap="onSettings">
        <view class="menu-icon">ğŸ”§</view>
        <text class="menu-text text-body">è®¾ç½®</text>
        <text class="menu-arrow">></text>
      </view>
      <view class="menu-item" bindtap="onAbout">
        <view class="menu-icon">â„¹ï¸</view>
        <text class="menu-text text-body">å…³äºæˆ‘ä»¬</text>
        <text class="menu-arrow">></text>
      </view>
    </view>
  </view>

  <!-- é€€å‡ºç™»å½• -->
  <view class="logout-section" wx:if="{{userInfo}}">
    <button class="btn btn-outline logout-btn" bindtap="onLogout">
      é€€å‡ºç™»å½•
    </button>
  </view>
</view>
