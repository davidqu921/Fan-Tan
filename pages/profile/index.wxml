<!--pages/profile/index.wxml-->
<view class="container">
  <!-- 背景装饰 -->
  <view class="bg-decoration">
    <image class="bg-image" src="/images/syq.jpg" mode="aspectFill" />
    <view class="bg-overlay"></view>
  </view>

  <!-- 用户信息区域 -->
  <view class="user-info-section card">
    <view class="user-avatar">
      <image class="avatar-large" src="{{userInfo.avatarUrl || '/images/default-avatar.png'}}" />
    </view>
    <view class="user-details">
      <text class="user-name text-title">{{userInfo.nickName || '未登录'}}</text>
      <text class="user-desc text-caption">羽毛球爱好者</text>
    </view>
    <button wx:if="{{!userInfo}}" class="btn btn-primary login-btn" bindtap="onLogin">
      登录
    </button>
  </view>

  <!-- 统计信息 -->
  <view class="stats-section card" wx:if="{{userInfo}}">
    <view class="stats-item">
      <text class="stats-number">{{userStats.joinedCount}}</text>
      <text class="stats-label">参与活动</text>
    </view>
    <view class="stats-item">
      <text class="stats-number">{{userStats.createdCount}}</text>
      <text class="stats-label">发布活动</text>
    </view>
    <view class="stats-item">
      <text class="stats-number">{{userStats.commentCount}}</text>
      <text class="stats-label">发表评论</text>
    </view>
  </view>

  <!-- 功能菜单 -->
  <view class="menu-section">
    <!-- 我的活动 -->
    <view class="menu-group card">
      <view class="menu-item" bindtap="onMyActivities">
        <view class="menu-icon">🏸</view>
        <text class="menu-text text-body">我参与的活动</text>
        <text class="menu-arrow">></text>
      </view>
      <view class="menu-item" bindtap="onMyCreated" wx:if="{{isAdmin}}">
        <view class="menu-icon">📝</view>
        <text class="menu-text text-body">我发布的活动</text>
        <text class="menu-arrow">></text>
      </view>
    </view>

    <!-- 管理功能（管理员可见） -->
    <view class="menu-group card" wx:if="{{isAdmin}}">
      <view class="menu-item" bindtap="onManageActivities">
        <view class="menu-icon">⚙️</view>
        <text class="menu-text text-body">活动管理</text>
        <text class="menu-arrow">></text>
      </view>
      <view class="menu-item" bindtap="onExportData">
        <view class="menu-icon">📊</view>
        <text class="menu-text text-body">数据导出</text>
        <text class="menu-arrow">></text>
      </view>
    </view>

    <!-- 设置功能 -->
    <view class="menu-group card">
      <view class="menu-item" bindtap="onSettings">
        <view class="menu-icon">🔧</view>
        <text class="menu-text text-body">设置</text>
        <text class="menu-arrow">></text>
      </view>
      <view class="menu-item" bindtap="onAbout">
        <view class="menu-icon">ℹ️</view>
        <text class="menu-text text-body">关于我们</text>
        <text class="menu-arrow">></text>
      </view>
    </view>
  </view>

  <!-- 退出登录 -->
  <view class="logout-section" wx:if="{{userInfo}}">
    <button class="btn btn-outline logout-btn" bindtap="onLogout">
      退出登录
    </button>
  </view>
</view>
